<div class="d-flex justify-content-end">
  <button nz-button nzType="default" *ngIf="!editable" (click)="setEditable(true)"><i nz-icon nzType="edit"></i>Edit</button>
  <button nz-button nzType="default" *ngIf="editable" (click)="setEditable(false)">Done</button>
</div>
<nz-spin [nzSpinning]="loading" style="width: 100%;">
  <ngx-widget-grid #ngxWidgetGrid [columns]="4" [highlightNextPosition]="false"
                   [showGrid]="editable" (widgetPositionChange)="onWidgetChange($event)" style="width: 100%;height: 100%;">
    <ngx-widget *ngFor="let item of widgets;index as index" [(position)]="item.rect"
                [movable]="editable" [resizable]="true">
      <div class="widget-content-container">
        <div *ngIf="!item.index;else widgetTpl" style="height:100%;width:100%; padding:10px; background-color: rgb(140, 198, 0);">
        </div>
        <button *ngIf="editable" nz-button nzType="primary" class="delete-icon-button" nzDanger (click)="onDelete(item, index)"><i nz-icon nzType="delete"></i></button>
        <ng-template #widgetTpl>
          <ng-template [ngTemplateOutlet]="coWidgetItemSource.getItem(item.index)"></ng-template>
        </ng-template>
      </div>
    </ngx-widget>
  </ngx-widget-grid>
</nz-spin>
<add-widget-panel [hidden]="!editable"
                  [items]="items"
                  [ngxWidgetGrid]="ngxWidgetGrid"
                  (addWidget)="onAddWidget($event)"
></add-widget-panel>
